<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/index.css" />
</head>

<body>
    <form class="info" autocomplete="off">
        姓名：<input type="text" class="uname" name="uname" />
        年龄：<input type="text" class="age" name="age" />
        性别:
        <select name="gender" class="gender">
            <option value="男">男</option>
            <option value="女">女</option>
        </select>
        薪资：<input type="text" class="salary" name="salary" />
        就业城市：<select name="city" class="city">
            <option value="北京">北京</option>
            <option value="上海">上海</option>
            <option value="广州">广州</option>
            <option value="深圳">深圳</option>
            <option value="曹县">曹县</option>
        </select>
        <button class="add">录入</button>
    </form>

</body>
<script>
     // 参考数据
     let initData = [
      {
        stuId: 1001,
        uname: '欧阳霸天',
        age: 19,
        gender: '男',
        salary: '20000',
        city: '上海',
      }
    ]
    // localStorage.setItem('test',JSON.stringify(initData));
    function addInfo() {
        //添加数据
        //获取DOM
        const form = document.querySelector('.info');
        const infoValue = form.children;
        //信号
        let flag = true;
        form.addEventListener('submit', function (e) {
            // 判断信息有无漏填,阻止默认提交并提示
            for (let i = 0; i < infoValue.length - 1; i++) {
                //阻止默认提交
                e.preventDefault();
                if (infoValue[i].value === '') {
                    // //阻止默认提交
                    // e.preventDefault();
                    //判断信号
                    flag = false;
                    return alert("信息未填完整");
                }

            }
            localStorage.setItem('test2',"222222");
            if (flag) {
                initData = JSON.parse(localStorage.getItem('test'));
                //接受信息的对象
                const infoPerson = {
                    stuId: initData.length+1001,
                    uname: infoValue[0].value,
                    age: infoValue[1].value,
                    gender: infoValue[2].value,
                    salary: infoValue[3].value,
                    city: infoValue[4].value,
                }
               
                initData.push(infoPerson);
                console.log(initData);
                localStorage.setItem('test',JSON.stringify(initData));
                console.log(localStorage.getItem('test'));
            }
        });

    }
    addInfo();
</script>

</html>